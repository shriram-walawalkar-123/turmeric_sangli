{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\swala\\\\Desktop\\\\turmeric_sangli\\\\turmeric-frontend\\\\src\\\\components\\\\StageDataEntryForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState, useRef } from 'react';\nimport { useStageAuth } from '../context/StageAuthContext';\nimport { API } from '../config/api';\nimport { Save, CheckCircle, AlertCircle, ArrowLeft, MapPin, RefreshCw } from 'lucide-react';\nimport QRCode from 'qrcode';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StageDataEntryForm = ({\n  onBack\n}) => {\n  _s();\n  var _batchInfo$maxPackets2, _batchInfo$maxPackets3, _packetsAtStage$count, _receiveFormData$dist, _receiveFormData$rece, _receiveFormData$disp, _receiveFormData$send, _receiveFormData$supp, _receiveFormData$supp2, _receiveFormData$rece2, _receiveFormData$rece3, _receiveFormData$shop, _receiveFormData$shop2, _receiveFormData$date;\n  const {\n    stageUser\n  } = useStageAuth();\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState('');\n  const [error, setError] = useState('');\n  const [packetValidation, setPacketValidation] = useState({\n    status: null,\n    message: ''\n  });\n  const actorId = useMemo(() => (stageUser === null || stageUser === void 0 ? void 0 : stageUser.username) || (stageUser === null || stageUser === void 0 ? void 0 : stageUser.id) || '', [stageUser === null || stageUser === void 0 ? void 0 : stageUser.username, stageUser === null || stageUser === void 0 ? void 0 : stageUser.id]);\n  const actorIdFieldName = useMemo(() => {\n    switch (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) {\n      case 'farmer':\n        return 'farmer_id';\n      case 'distributor':\n        return 'distributor_id';\n      case 'supplier':\n        return 'supplier_id';\n      case 'shopkeeper':\n        return 'shopkeeper_id';\n      default:\n        return null;\n    }\n  }, [stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n\n  // Processing stage specific state\n  const [farmers, setFarmers] = useState([]);\n  const [selectedFarmer, setSelectedFarmer] = useState('');\n  const [batches, setBatches] = useState([]);\n  const [selectedBatch, setSelectedBatch] = useState('');\n  const [batchPacketCount, setBatchPacketCount] = useState(null);\n  const [loadingFarmers, setLoadingFarmers] = useState(false);\n  const [loadingBatches, setLoadingBatches] = useState(false);\n  const [batchInfo, setBatchInfo] = useState(null);\n  const [packetSizeGm, setPacketSizeGm] = useState('');\n  const [createPacketCount, setCreatePacketCount] = useState('');\n  const [loadingBatchInfo, setLoadingBatchInfo] = useState(false);\n  const [packetsAtStage, setPacketsAtStage] = useState({\n    count: 0,\n    packetIds: []\n  });\n  const [receiveCount, setReceiveCount] = useState('');\n  const [loadingPacketsByStage, setLoadingPacketsByStage] = useState(false);\n  const [receiveFormData, setReceiveFormData] = useState({});\n  const getStageFormConfig = stage => {\n    const configs = {\n      farmer: {\n        title: 'Harvest Data Entry',\n        description: 'Record harvest information. Add quantity (gm) for packet creation later.',\n        fields: [{\n          name: 'farmer_id',\n          label: 'Farmer ID',\n          type: 'text',\n          required: true\n        }, {\n          name: 'product_name',\n          label: 'Product Name',\n          type: 'text',\n          required: true\n        }, {\n          name: 'batch_id',\n          label: 'Batch ID',\n          type: 'text',\n          required: true\n        }, {\n          name: 'quantity_gm',\n          label: 'Quantity (grams)',\n          type: 'number',\n          required: true,\n          placeholder: 'e.g. 750'\n        }, {\n          name: 'harvest_date',\n          label: 'Harvest Date',\n          type: 'date',\n          required: true\n        }, {\n          name: 'gps_coordinates',\n          label: 'GPS Coordinates',\n          type: 'text',\n          required: true,\n          placeholder: 'lat, lng'\n        }, {\n          name: 'fertilizer',\n          label: 'Fertilizer Used',\n          type: 'text',\n          required: false\n        }, {\n          name: 'organic_status',\n          label: 'Organic Status',\n          type: 'select',\n          required: true,\n          options: ['Organic', 'Non-Organic']\n        }],\n        submitEndpoint: 'addHarvest'\n      },\n      processing: {\n        title: 'Processing Data Entry',\n        description: 'Record processing and packaging information',\n        fields: [],\n        submitEndpoint: 'addProcessing'\n      },\n      distributor: {\n        title: 'Distributor Data Entry',\n        description: 'Receive packets from processing and record distribution details',\n        fields: [],\n        submitEndpoint: null\n      },\n      supplier: {\n        title: 'Supplier Data Entry',\n        description: 'Receive packets from distributor and record supply details',\n        fields: [],\n        submitEndpoint: null\n      },\n      shopkeeper: {\n        title: 'Shopkeeper Data Entry',\n        description: 'Receive packets from supplier and record receipt details',\n        fields: [],\n        submitEndpoint: null\n      }\n    };\n    return configs[stage] || configs.farmer;\n  };\n  const stageConfig = getStageFormConfig(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage);\n  const [formData, setFormData] = useState({});\n  const [geoStatus, setGeoStatus] = useState({\n    fetching: false,\n    error: ''\n  });\n  const [qrDataUrl, setQrDataUrl] = useState('');\n  const gpsFieldNames = useMemo(() => {\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'farmer') {\n      return stageConfig.fields.filter(f => f.name.includes('gps')).map(f => f.name);\n    }\n    return ['gps_coordinates'];\n  }, [stageConfig, stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  useEffect(() => {\n    const resetData = {};\n    if (actorIdFieldName && actorId) resetData[actorIdFieldName] = actorId;\n    setFormData(resetData);\n    setReceiveFormData({});\n    setQrDataUrl('');\n    setPacketValidation({\n      status: null,\n      message: ''\n    });\n  }, [stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage, actorIdFieldName, actorId]);\n  useEffect(() => {\n    if (!actorIdFieldName || !actorId) return;\n    setFormData(prev => ({\n      ...prev,\n      [actorIdFieldName]: actorId\n    }));\n  }, [actorIdFieldName, actorId]);\n  const formatCoords = coords => `${coords.latitude.toFixed(6)}, ${coords.longitude.toFixed(6)}`;\n  const fetchLocation = async (target = 'form') => {\n    if (!('geolocation' in navigator)) {\n      setGeoStatus({\n        fetching: false,\n        error: 'Geolocation not supported'\n      });\n      return;\n    }\n    setGeoStatus({\n      fetching: true,\n      error: ''\n    });\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(resolve, reject, {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0\n        });\n      });\n      const value = formatCoords(position.coords);\n      if (target === 'receive') {\n        setReceiveFormData(prev => ({\n          ...prev,\n          gps_coordinates: value\n        }));\n      } else {\n        setFormData(prev => {\n          const next = {\n            ...prev\n          };\n          gpsFieldNames.forEach(name => {\n            next[name] = value;\n          });\n          return next;\n        });\n      }\n      setGeoStatus({\n        fetching: false,\n        error: ''\n      });\n    } catch (err) {\n      setGeoStatus({\n        fetching: false,\n        error: (err === null || err === void 0 ? void 0 : err.message) || 'Unable to fetch location'\n      });\n    }\n  };\n  useEffect(() => {\n    if (gpsFieldNames.length > 0) fetchLocation();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stageConfig.title]);\n  useEffect(() => {\n    if (['processing', 'distributor', 'supplier', 'shopkeeper'].includes(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage)) {\n      fetchFarmers();\n    }\n  }, [stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  useEffect(() => {\n    if (['processing', 'distributor', 'supplier', 'shopkeeper'].includes(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) && selectedFarmer) {\n      fetchBatchesForFarmer(selectedFarmer);\n    } else {\n      setBatches([]);\n      setSelectedBatch('');\n      setBatchPacketCount(null);\n    }\n  }, [selectedFarmer, stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  useEffect(() => {\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'processing' && selectedBatch) {\n      fetchBatchPacketCount(selectedBatch);\n      setFormData(prev => ({\n        ...prev,\n        batch_id: selectedBatch\n      }));\n    } else {\n      setBatchPacketCount(null);\n    }\n  }, [selectedBatch, stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  useEffect(() => {\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'processing' && selectedBatch) {\n      setLoadingBatchInfo(true);\n      const size = packetSizeGm ? Number(packetSizeGm) : null;\n      const promise = size && size > 0 ? API.getBatchInfo(selectedBatch, size) : API.getBatchInfo(selectedBatch);\n      promise.then(res => setBatchInfo(res.data || null)).catch(() => setBatchInfo(null)).finally(() => setLoadingBatchInfo(false));\n    } else {\n      setBatchInfo(null);\n    }\n  }, [selectedBatch, packetSizeGm, stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  const previousStage = useMemo(() => {\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'distributor') return 'processing';\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'supplier') return 'distributor';\n    if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'shopkeeper') return 'supplier';\n    return null;\n  }, [stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n  useEffect(() => {\n    if (previousStage && selectedBatch) {\n      setLoadingPacketsByStage(true);\n      API.getPacketsByStage(selectedBatch, previousStage).then(res => setPacketsAtStage({\n        count: res.data.count || 0,\n        packetIds: res.data.packetIds || []\n      })).catch(() => setPacketsAtStage({\n        count: 0,\n        packetIds: []\n      })).finally(() => setLoadingPacketsByStage(false));\n    } else {\n      setPacketsAtStage({\n        count: 0,\n        packetIds: []\n      });\n    }\n  }, [previousStage, selectedBatch]);\n\n  // Auto-fill actor GPS into receiveFormData\n  useEffect(() => {\n    if (['distributor', 'supplier', 'shopkeeper'].includes(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage)) {\n      fetchLocation('receive');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage]);\n\n  // Auto-fill actor ID into receiveFormData\n  useEffect(() => {\n    if (actorIdFieldName && actorId) {\n      setReceiveFormData(prev => {\n        var _prev$actorIdFieldNam;\n        return {\n          ...prev,\n          [actorIdFieldName]: (_prev$actorIdFieldNam = prev[actorIdFieldName]) !== null && _prev$actorIdFieldNam !== void 0 ? _prev$actorIdFieldNam : actorId\n        };\n      });\n    }\n  }, [actorIdFieldName, actorId]);\n  const fetchFarmers = async () => {\n    setLoadingFarmers(true);\n    try {\n      const response = await API.getFarmers();\n      setFarmers(response.data.farmers || []);\n    } catch (err) {\n      setError(`Failed to load farmers: ${err.message}`);\n    } finally {\n      setLoadingFarmers(false);\n    }\n  };\n  const fetchBatchesForFarmer = async farmerId => {\n    setLoadingBatches(true);\n    try {\n      const response = await API.getBatchesForFarmer(farmerId);\n      setBatches(response.data.batches || []);\n      setSelectedBatch('');\n    } catch (err) {\n      setError(`Failed to load batches: ${err.message}`);\n      setBatches([]);\n    } finally {\n      setLoadingBatches(false);\n    }\n  };\n  const fetchBatchPacketCount = async batchId => {\n    try {\n      const response = await API.getBatchPacketCount(batchId);\n      setBatchPacketCount({\n        count: parseInt(response.data.packetCount) || 0,\n        exists: response.data.exists\n      });\n    } catch {\n      setBatchPacketCount({\n        count: 0,\n        exists: false\n      });\n    }\n  };\n  const handleCreatePacketsSubmit = async e => {\n    var _batchInfo$maxPackets;\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    const count = parseInt(createPacketCount, 10);\n    const maxPackets = (_batchInfo$maxPackets = batchInfo === null || batchInfo === void 0 ? void 0 : batchInfo.maxPackets) !== null && _batchInfo$maxPackets !== void 0 ? _batchInfo$maxPackets : 0;\n    if (!selectedBatch || !packetSizeGm || count < 1 || count > maxPackets) {\n      setError(`Enter number of packets between 1 and ${maxPackets}.`);\n      setLoading(false);\n      return;\n    }\n    try {\n      const payload = {\n        packet_size_gm: Number(packetSizeGm),\n        count,\n        processing_gps: formData.processing_gps || '',\n        grinding_facility_name: formData.grinding_facility_name || '',\n        moisture_content: formData.moisture_content || 0,\n        curcumin_content: formData.curcumin_content || 0,\n        heavy_metals: formData.heavy_metals || '',\n        physical_properties: formData.physical_properties || '',\n        packaging_date: formData.packaging_date || '',\n        packaging_unit: `${packetSizeGm}g`,\n        expiry_date: formData.expiry_date || '',\n        sending_box_code: formData.sending_box_code || '',\n        distributor_id: formData.distributor_id || ''\n      };\n      const res = await API.createPackets(selectedBatch, payload);\n      const createdIds = res.data.packetIds || [];\n      setSuccess(`${res.data.message || `Created ${count} packet(s).`} IDs: ${createdIds.join(', ')}`);\n      setCreatePacketCount('');\n      setPacketSizeGm('');\n      fetchBatchPacketCount(selectedBatch);\n      const infoRes = await API.getBatchInfo(selectedBatch, Number(packetSizeGm));\n      setBatchInfo(infoRes.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || (err === null || err === void 0 ? void 0 : err.message) || 'Failed to create packets.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleReceiveSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    const count = parseInt(receiveCount, 10);\n    if (!selectedBatch || !selectedFarmer || count < 1 || count > (packetsAtStage.count || 0)) {\n      setError(`Enter number of packets between 1 and ${packetsAtStage.count || 0}.`);\n      setLoading(false);\n      return;\n    }\n    try {\n      var _base$actorIdFieldNam;\n      const stage = stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage;\n      const base = {\n        batch_id: selectedBatch,\n        farmer_id: selectedFarmer,\n        count,\n        ...receiveFormData\n      };\n      if (actorIdFieldName && actorId) base[actorIdFieldName] = (_base$actorIdFieldNam = base[actorIdFieldName]) !== null && _base$actorIdFieldNam !== void 0 ? _base$actorIdFieldNam : actorId;\n      let res;\n      if (stage === 'distributor') res = await API.distributorReceive(base);else if (stage === 'supplier') res = await API.supplierReceive(base);else if (stage === 'shopkeeper') res = await API.shopkeeperReceive(base);else throw new Error('Invalid stage');\n      setSuccess(res.data.message || `Received ${count} packet(s).`);\n      setReceiveCount('');\n      setPacketsAtStage(p => ({\n        count: (p.count || 0) - count,\n        packetIds: []\n      }));\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError((err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || (err === null || err === void 0 ? void 0 : err.message) || 'Failed to receive packets.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === actorIdFieldName) return;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    try {\n      const submitData = {\n        ...formData\n      };\n      const data = await API[stageConfig.submitEndpoint](submitData);\n      setSuccess('Data submitted successfully!');\n      const resetData = {};\n      if (actorIdFieldName && actorId) resetData[actorIdFieldName] = actorId;\n      setFormData(resetData);\n      setPacketValidation({\n        status: null,\n        message: ''\n      });\n      if ((stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'processing') {\n        setSelectedFarmer('');\n        setSelectedBatch('');\n        setBatchPacketCount(null);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError((error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to submit data');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getStageColor = stage => {\n    const colors = {\n      farmer: 'green',\n      processing: 'blue',\n      distributor: 'purple',\n      supplier: 'yellow',\n      shopkeeper: 'red'\n    };\n    return colors[stage] || 'gray';\n  };\n  const stageColor = getStageColor(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage);\n\n  // ── Shared input component ────────────────────────────────────────────────\n  const FormField = ({\n    label,\n    required,\n    children\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"block text-sm font-medium text-gray-700 mb-1\",\n      children: [label, required && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-500 ml-1\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 370,\n    columnNumber: 5\n  }, this);\n  const inputClass = \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\";\n  const selectClass = inputClass;\n  const GpsInput = ({\n    value,\n    onChange,\n    onFetch,\n    fetching\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex gap-2 items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      value: value || '',\n      onChange: onChange,\n      placeholder: \"lat, lng\",\n      className: inputClass,\n      readOnly: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: onFetch,\n      disabled: fetching,\n      className: \"shrink-0 inline-flex items-center gap-1 px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50\",\n      children: [fetching ? /*#__PURE__*/_jsxDEV(RefreshCw, {\n        className: \"animate-spin\",\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(MapPin, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 72\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"hidden md:inline\",\n        children: fetching ? 'Locating...' : 'GPS'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-xl p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [onBack && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onBack,\n          className: \"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this), \" Back to Dashboard\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 p-4 rounded-xl`,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-white mb-1\",\n            children: stageConfig.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white/90\",\n            children: stageConfig.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), success]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this), (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'farmer' && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: stageConfig.fields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: field.name.includes('gps') ? 'md:col-span-2' : '',\n            children: /*#__PURE__*/_jsxDEV(FormField, {\n              label: field.label,\n              required: field.required,\n              children: field.type === 'select' ? /*#__PURE__*/_jsxDEV(\"select\", {\n                name: field.name,\n                value: formData[field.name] || '',\n                onChange: handleInputChange,\n                className: selectClass,\n                required: field.required,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: [\"Select \", field.label]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 25\n                }, this), field.options.map(o => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: o,\n                  children: o\n                }, o, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 431,\n                  columnNumber: 49\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 23\n              }, this) : field.name.includes('gps') ? /*#__PURE__*/_jsxDEV(GpsInput, {\n                value: formData[field.name],\n                onChange: handleInputChange,\n                onFetch: () => fetchLocation('form'),\n                fetching: geoStatus.fetching\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n                type: field.type,\n                name: field.name,\n                value: formData[field.name] || '',\n                onChange: handleInputChange,\n                placeholder: field.placeholder || `Enter ${field.label.toLowerCase()}`,\n                className: `${inputClass} ${field.name === actorIdFieldName ? 'bg-gray-50' : ''}`,\n                required: field.required,\n                readOnly: field.name === actorIdFieldName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 19\n            }, this)\n          }, field.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end pt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: `bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-2`,\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 30\n              }, this), \"Submitting...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 128\n              }, this), \"Submit Data\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 11\n      }, this), (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'processing' && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCreatePacketsSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5 border-2 border-blue-200 rounded-xl bg-blue-50/40\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold text-gray-800 mb-4\",\n            children: \"Batch Selection\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Select Farmer\",\n              required: true,\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedFarmer,\n                onChange: e => setSelectedFarmer(e.target.value),\n                className: selectClass,\n                required: true,\n                disabled: loadingFarmers,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: loadingFarmers ? 'Loading...' : 'Select Farmer'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this), farmers.map(f => {\n                  const id = typeof f === 'string' ? f : String(f || '');\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: id,\n                    children: id\n                  }, id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 104\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Select Batch ID\",\n              required: true,\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedBatch,\n                onChange: e => setSelectedBatch(e.target.value),\n                className: selectClass,\n                required: true,\n                disabled: !selectedFarmer || loadingBatches,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: !selectedFarmer ? 'Select farmer first' : loadingBatches ? 'Loading...' : batches.length === 0 ? 'No batches' : 'Select Batch'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this), batches.map(b => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: b.batchId,\n                  children: [b.batchId, \" \", b.availableGm != null ? `(${b.availableGm}gm avail)` : '']\n                }, b.batchId, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 39\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), selectedBatch && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-3 bg-white rounded-lg border border-blue-200 text-sm text-gray-700\",\n            children: [\"Available quantity (after 8% processing loss):\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: loadingBatchInfo ? 'Loading...' : (batchInfo === null || batchInfo === void 0 ? void 0 : batchInfo.availableGm) != null ? `${batchInfo.availableGm} gm` : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this), selectedBatch && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5 border border-gray-200 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800 mb-4\",\n              children: \"Lab & Quality Testing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Processing GPS\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(GpsInput, {\n                  value: formData.processing_gps,\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    processing_gps: e.target.value\n                  })),\n                  onFetch: () => fetchLocation('form'),\n                  fetching: geoStatus.fetching\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Grinding Facility Name\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: formData.grinding_facility_name || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    grinding_facility_name: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. Sri Ram Grinding Unit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Moisture Content (%)\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  value: formData.moisture_content || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    moisture_content: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. 8.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Curcumin Content (%)\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  value: formData.curcumin_content || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    curcumin_content: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. 3.2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Heavy Metals Check\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: formData.heavy_metals || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    heavy_metals: e.target.value\n                  })),\n                  className: selectClass,\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select result\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 501,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Pass\",\n                    children: \"Pass\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 502,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Fail\",\n                    children: \"Fail\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Physical Properties\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: formData.physical_properties || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    physical_properties: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. Fine yellow powder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5 border border-gray-200 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800 mb-4\",\n              children: \"Packaging Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Packaging Date\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: formData.packaging_date || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    packaging_date: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Expiry Date\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: formData.expiry_date || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    expiry_date: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Sending Box Code\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: formData.sending_box_code || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    sending_box_code: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. BOX-001\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Distributor ID\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: formData.distributor_id || '',\n                  onChange: e => setFormData(p => ({\n                    ...p,\n                    distributor_id: e.target.value\n                  })),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. dist1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5 border-2 border-blue-300 rounded-xl bg-blue-50/40\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800 mb-4\",\n              children: \"Create Packets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\",\n              children: [/*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Packet size (gm)\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: packetSizeGm,\n                  onChange: e => setPacketSizeGm(e.target.value),\n                  className: selectClass,\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select size\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 537,\n                    columnNumber: 25\n                  }, this), [50, 100, 250, 500].map(g => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: g,\n                    children: [g, \" gm\"]\n                  }, g, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 55\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-gray-700 mb-1\",\n                  children: \"Max packets (for this size)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"py-2 text-gray-800 font-semibold\",\n                  children: loadingBatchInfo ? '...' : (batchInfo === null || batchInfo === void 0 ? void 0 : batchInfo.maxPackets) != null ? batchInfo.maxPackets : '—'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                label: \"Number of packets to create\",\n                required: true,\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: 1,\n                  max: (_batchInfo$maxPackets2 = batchInfo === null || batchInfo === void 0 ? void 0 : batchInfo.maxPackets) !== null && _batchInfo$maxPackets2 !== void 0 ? _batchInfo$maxPackets2 : 0,\n                  value: createPacketCount,\n                  onChange: e => setCreatePacketCount(e.target.value),\n                  className: inputClass,\n                  required: true,\n                  placeholder: \"e.g. 5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-xs text-gray-500\",\n              children: [\"Packet IDs format: FarmerId-BatchId-\", packetSizeGm || '50', \"g-001, 002, ...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading || loadingBatchInfo || ((_batchInfo$maxPackets3 = batchInfo === null || batchInfo === void 0 ? void 0 : batchInfo.maxPackets) !== null && _batchInfo$maxPackets3 !== void 0 ? _batchInfo$maxPackets3 : 0) < 1,\n              className: \"bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\",\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 34\n                }, this), \"Creating...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 130\n                }, this), \"Create Packets\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this), ['distributor', 'supplier', 'shopkeeper'].includes(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) && /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleReceiveSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-5 border-2 border-purple-200 rounded-xl bg-purple-50/40\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold text-gray-800 mb-4\",\n            children: \"Select Batch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Select Farmer\",\n              required: true,\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedFarmer,\n                onChange: e => setSelectedFarmer(e.target.value),\n                className: selectClass,\n                required: true,\n                disabled: loadingFarmers,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: loadingFarmers ? 'Loading...' : 'Select Farmer'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 21\n                }, this), farmers.map(f => {\n                  const id = typeof f === 'string' ? f : String(f || '');\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: id,\n                    children: id\n                  }, id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 104\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Select Batch ID\",\n              required: true,\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedBatch,\n                onChange: e => setSelectedBatch(e.target.value),\n                className: selectClass,\n                required: true,\n                disabled: !selectedFarmer || loadingBatches,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: !selectedFarmer ? 'Select farmer first' : loadingBatches ? 'Loading...' : batches.length === 0 ? 'No batches' : 'Select Batch'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 21\n                }, this), batches.map(b => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: b.batchId,\n                  children: b.batchId\n                }, b.batchId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 39\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 15\n          }, this), selectedBatch && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-3 bg-white rounded-lg border border-purple-200 text-sm text-gray-700\",\n            children: [\"Packets available at \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: previousStage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 40\n            }, this), \":\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: loadingPacketsByStage ? 'Loading...' : (_packetsAtStage$count = packetsAtStage.count) !== null && _packetsAtStage$count !== void 0 ? _packetsAtStage$count : 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), selectedBatch && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5 border border-gray-200 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800 mb-4\",\n              children: [(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'distributor' && 'Distribution Details', (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'supplier' && 'Supply Details', (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'shopkeeper' && 'Receipt Details']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n              children: [(stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'distributor' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Distributor ID\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$dist = receiveFormData.distributor_id) !== null && _receiveFormData$dist !== void 0 ? _receiveFormData$dist : actorId,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      distributor_id: e.target.value\n                    })),\n                    className: `${inputClass} bg-gray-50`,\n                    required: true,\n                    readOnly: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 606,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"GPS Coordinates\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(GpsInput, {\n                    value: receiveFormData.gps_coordinates,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      gps_coordinates: e.target.value\n                    })),\n                    onFetch: () => fetchLocation('receive'),\n                    fetching: geoStatus.fetching\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 609,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Received Box Code\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$rece = receiveFormData.received_box_code) !== null && _receiveFormData$rece !== void 0 ? _receiveFormData$rece : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      received_box_code: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true,\n                    placeholder: \"e.g. BOX-001\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 612,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 611,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Dispatch Date\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: (_receiveFormData$disp = receiveFormData.dispatch_date) !== null && _receiveFormData$disp !== void 0 ? _receiveFormData$disp : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      dispatch_date: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 615,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 614,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Sending Box Code\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$send = receiveFormData.sending_box_code) !== null && _receiveFormData$send !== void 0 ? _receiveFormData$send : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      sending_box_code: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true,\n                    placeholder: \"e.g. BOX-002\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 618,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 617,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Supplier ID\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$supp = receiveFormData.supplier_id) !== null && _receiveFormData$supp !== void 0 ? _receiveFormData$supp : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      supplier_id: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true,\n                    placeholder: \"e.g. supplier1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true), (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'supplier' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Supplier ID\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$supp2 = receiveFormData.supplier_id) !== null && _receiveFormData$supp2 !== void 0 ? _receiveFormData$supp2 : actorId,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      supplier_id: e.target.value\n                    })),\n                    className: `${inputClass} bg-gray-50`,\n                    required: true,\n                    readOnly: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 627,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Received Box Code\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$rece2 = receiveFormData.received_box_code) !== null && _receiveFormData$rece2 !== void 0 ? _receiveFormData$rece2 : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      received_box_code: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true,\n                    placeholder: \"e.g. BOX-001\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 630,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"GPS Coordinates\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(GpsInput, {\n                    value: receiveFormData.gps_coordinates,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      gps_coordinates: e.target.value\n                    })),\n                    onFetch: () => fetchLocation('receive'),\n                    fetching: geoStatus.fetching\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 633,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Receipt Date\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: (_receiveFormData$rece3 = receiveFormData.receipt_date) !== null && _receiveFormData$rece3 !== void 0 ? _receiveFormData$rece3 : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      receipt_date: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 636,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Shopkeeper ID\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$shop = receiveFormData.shopkeeper_id) !== null && _receiveFormData$shop !== void 0 ? _receiveFormData$shop : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      shopkeeper_id: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true,\n                    placeholder: \"e.g. shop1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 639,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true), (stageUser === null || stageUser === void 0 ? void 0 : stageUser.stage) === 'shopkeeper' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Shopkeeper ID\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_receiveFormData$shop2 = receiveFormData.shopkeeper_id) !== null && _receiveFormData$shop2 !== void 0 ? _receiveFormData$shop2 : actorId,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      shopkeeper_id: e.target.value\n                    })),\n                    className: `${inputClass} bg-gray-50`,\n                    required: true,\n                    readOnly: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 644,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"GPS Coordinates\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(GpsInput, {\n                    value: receiveFormData.gps_coordinates,\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      gps_coordinates: e.target.value\n                    })),\n                    onFetch: () => fetchLocation('receive'),\n                    fetching: geoStatus.fetching\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"Date Received\",\n                  required: true,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: (_receiveFormData$date = receiveFormData.date_received) !== null && _receiveFormData$date !== void 0 ? _receiveFormData$date : '',\n                    onChange: e => setReceiveFormData(p => ({\n                      ...p,\n                      date_received: e.target.value\n                    })),\n                    className: inputClass,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 651,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-5 border-2 border-purple-300 rounded-xl bg-purple-50/40\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-bold text-gray-800 mb-3\",\n              children: \"Receive Packets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(FormField, {\n              label: \"Number of packets to receive\",\n              required: true,\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: 1,\n                max: packetsAtStage.count || 0,\n                value: receiveCount,\n                onChange: e => setReceiveCount(e.target.value),\n                className: \"w-full max-w-xs px-4 py-2 border border-gray-300 rounded-lg\",\n                required: true,\n                placeholder: \"e.g. 5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading || loadingPacketsByStage || (packetsAtStage.count || 0) < 1,\n              className: `bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-2`,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 34\n                }, this), \"Submitting...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 132\n                }, this), \"Receive Packets\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 393,\n    columnNumber: 5\n  }, this);\n};\n_s(StageDataEntryForm, \"gSz61KBqvZXa33ypBFJSL6zCuKI=\", false, function () {\n  return [useStageAuth];\n});\n_c = StageDataEntryForm;\nexport default StageDataEntryForm;\nvar _c;\n$RefreshReg$(_c, \"StageDataEntryForm\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useRef","useStageAuth","API","Save","CheckCircle","AlertCircle","ArrowLeft","MapPin","RefreshCw","QRCode","jsxDEV","_jsxDEV","Fragment","_Fragment","StageDataEntryForm","onBack","_s","_batchInfo$maxPackets2","_batchInfo$maxPackets3","_packetsAtStage$count","_receiveFormData$dist","_receiveFormData$rece","_receiveFormData$disp","_receiveFormData$send","_receiveFormData$supp","_receiveFormData$supp2","_receiveFormData$rece2","_receiveFormData$rece3","_receiveFormData$shop","_receiveFormData$shop2","_receiveFormData$date","stageUser","loading","setLoading","success","setSuccess","error","setError","packetValidation","setPacketValidation","status","message","actorId","username","id","actorIdFieldName","stage","farmers","setFarmers","selectedFarmer","setSelectedFarmer","batches","setBatches","selectedBatch","setSelectedBatch","batchPacketCount","setBatchPacketCount","loadingFarmers","setLoadingFarmers","loadingBatches","setLoadingBatches","batchInfo","setBatchInfo","packetSizeGm","setPacketSizeGm","createPacketCount","setCreatePacketCount","loadingBatchInfo","setLoadingBatchInfo","packetsAtStage","setPacketsAtStage","count","packetIds","receiveCount","setReceiveCount","loadingPacketsByStage","setLoadingPacketsByStage","receiveFormData","setReceiveFormData","getStageFormConfig","configs","farmer","title","description","fields","name","label","type","required","placeholder","options","submitEndpoint","processing","distributor","supplier","shopkeeper","stageConfig","formData","setFormData","geoStatus","setGeoStatus","fetching","qrDataUrl","setQrDataUrl","gpsFieldNames","filter","f","includes","map","resetData","prev","formatCoords","coords","latitude","toFixed","longitude","fetchLocation","target","navigator","position","Promise","resolve","reject","geolocation","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","value","gps_coordinates","next","forEach","err","length","fetchFarmers","fetchBatchesForFarmer","fetchBatchPacketCount","batch_id","size","Number","promise","getBatchInfo","then","res","data","catch","finally","previousStage","getPacketsByStage","_prev$actorIdFieldNam","response","getFarmers","farmerId","getBatchesForFarmer","batchId","getBatchPacketCount","parseInt","packetCount","exists","handleCreatePacketsSubmit","e","_batchInfo$maxPackets","preventDefault","maxPackets","payload","packet_size_gm","processing_gps","grinding_facility_name","moisture_content","curcumin_content","heavy_metals","physical_properties","packaging_date","packaging_unit","expiry_date","sending_box_code","distributor_id","createPackets","createdIds","join","infoRes","_err$response","_err$response$data","handleReceiveSubmit","_base$actorIdFieldNam","base","farmer_id","distributorReceive","supplierReceive","shopkeeperReceive","Error","p","_err$response2","_err$response2$data","handleInputChange","handleSubmit","submitData","_error$response","_error$response$data","getStageColor","colors","stageColor","FormField","children","className","fileName","_jsxFileName","lineNumber","columnNumber","inputClass","selectClass","GpsInput","onChange","onFetch","readOnly","onClick","disabled","onSubmit","field","o","toLowerCase","String","b","availableGm","step","g","min","max","received_box_code","dispatch_date","supplier_id","receipt_date","shopkeeper_id","date_received","_c","$RefreshReg$"],"sources":["C:/Users/swala/Desktop/turmeric_sangli/turmeric-frontend/src/components/StageDataEntryForm.js"],"sourcesContent":["import React, { useEffect, useMemo, useState, useRef } from 'react';\nimport { useStageAuth } from '../context/StageAuthContext';\nimport { API } from '../config/api';\nimport { Save, CheckCircle, AlertCircle, ArrowLeft, MapPin, RefreshCw } from 'lucide-react';\nimport QRCode from 'qrcode';\n\nconst StageDataEntryForm = ({ onBack }) => {\n  const { stageUser } = useStageAuth();\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState('');\n  const [error, setError] = useState('');\n  const [packetValidation, setPacketValidation] = useState({ status: null, message: '' });\n  const actorId = useMemo(\n    () => stageUser?.username || stageUser?.id || '',\n    [stageUser?.username, stageUser?.id]\n  );\n  const actorIdFieldName = useMemo(() => {\n    switch (stageUser?.stage) {\n      case 'farmer': return 'farmer_id';\n      case 'distributor': return 'distributor_id';\n      case 'supplier': return 'supplier_id';\n      case 'shopkeeper': return 'shopkeeper_id';\n      default: return null;\n    }\n  }, [stageUser?.stage]);\n\n  // Processing stage specific state\n  const [farmers, setFarmers] = useState([]);\n  const [selectedFarmer, setSelectedFarmer] = useState('');\n  const [batches, setBatches] = useState([]);\n  const [selectedBatch, setSelectedBatch] = useState('');\n  const [batchPacketCount, setBatchPacketCount] = useState(null);\n  const [loadingFarmers, setLoadingFarmers] = useState(false);\n  const [loadingBatches, setLoadingBatches] = useState(false);\n  const [batchInfo, setBatchInfo] = useState(null);\n  const [packetSizeGm, setPacketSizeGm] = useState('');\n  const [createPacketCount, setCreatePacketCount] = useState('');\n  const [loadingBatchInfo, setLoadingBatchInfo] = useState(false);\n  const [packetsAtStage, setPacketsAtStage] = useState({ count: 0, packetIds: [] });\n  const [receiveCount, setReceiveCount] = useState('');\n  const [loadingPacketsByStage, setLoadingPacketsByStage] = useState(false);\n  const [receiveFormData, setReceiveFormData] = useState({});\n\n  const getStageFormConfig = (stage) => {\n    const configs = {\n      farmer: {\n        title: 'Harvest Data Entry',\n        description: 'Record harvest information. Add quantity (gm) for packet creation later.',\n        fields: [\n          { name: 'farmer_id', label: 'Farmer ID', type: 'text', required: true },\n          { name: 'product_name', label: 'Product Name', type: 'text', required: true },\n          { name: 'batch_id', label: 'Batch ID', type: 'text', required: true },\n          { name: 'quantity_gm', label: 'Quantity (grams)', type: 'number', required: true, placeholder: 'e.g. 750' },\n          { name: 'harvest_date', label: 'Harvest Date', type: 'date', required: true },\n          { name: 'gps_coordinates', label: 'GPS Coordinates', type: 'text', required: true, placeholder: 'lat, lng' },\n          { name: 'fertilizer', label: 'Fertilizer Used', type: 'text', required: false },\n          { name: 'organic_status', label: 'Organic Status', type: 'select', required: true, options: ['Organic', 'Non-Organic'] }\n        ],\n        submitEndpoint: 'addHarvest'\n      },\n      processing: {\n        title: 'Processing Data Entry',\n        description: 'Record processing and packaging information',\n        fields: [],\n        submitEndpoint: 'addProcessing'\n      },\n      distributor: {\n        title: 'Distributor Data Entry',\n        description: 'Receive packets from processing and record distribution details',\n        fields: [],\n        submitEndpoint: null\n      },\n      supplier: {\n        title: 'Supplier Data Entry',\n        description: 'Receive packets from distributor and record supply details',\n        fields: [],\n        submitEndpoint: null\n      },\n      shopkeeper: {\n        title: 'Shopkeeper Data Entry',\n        description: 'Receive packets from supplier and record receipt details',\n        fields: [],\n        submitEndpoint: null\n      }\n    };\n    return configs[stage] || configs.farmer;\n  };\n\n  const stageConfig = getStageFormConfig(stageUser?.stage);\n  const [formData, setFormData] = useState({});\n  const [geoStatus, setGeoStatus] = useState({ fetching: false, error: '' });\n  const [qrDataUrl, setQrDataUrl] = useState('');\n\n  const gpsFieldNames = useMemo(() => {\n    if (stageUser?.stage === 'farmer') {\n      return stageConfig.fields.filter(f => f.name.includes('gps')).map(f => f.name);\n    }\n    return ['gps_coordinates'];\n  }, [stageConfig, stageUser?.stage]);\n\n  useEffect(() => {\n    const resetData = {};\n    if (actorIdFieldName && actorId) resetData[actorIdFieldName] = actorId;\n    setFormData(resetData);\n    setReceiveFormData({});\n    setQrDataUrl('');\n    setPacketValidation({ status: null, message: '' });\n  }, [stageUser?.stage, actorIdFieldName, actorId]);\n\n  useEffect(() => {\n    if (!actorIdFieldName || !actorId) return;\n    setFormData(prev => ({ ...prev, [actorIdFieldName]: actorId }));\n  }, [actorIdFieldName, actorId]);\n\n  const formatCoords = (coords) => `${coords.latitude.toFixed(6)}, ${coords.longitude.toFixed(6)}`;\n\n  const fetchLocation = async (target = 'form') => {\n    if (!('geolocation' in navigator)) {\n      setGeoStatus({ fetching: false, error: 'Geolocation not supported' });\n      return;\n    }\n    setGeoStatus({ fetching: true, error: '' });\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(resolve, reject, {\n          enableHighAccuracy: true, timeout: 10000, maximumAge: 0,\n        });\n      });\n      const value = formatCoords(position.coords);\n      if (target === 'receive') {\n        setReceiveFormData(prev => ({ ...prev, gps_coordinates: value }));\n      } else {\n        setFormData(prev => {\n          const next = { ...prev };\n          gpsFieldNames.forEach(name => { next[name] = value; });\n          return next;\n        });\n      }\n      setGeoStatus({ fetching: false, error: '' });\n    } catch (err) {\n      setGeoStatus({ fetching: false, error: err?.message || 'Unable to fetch location' });\n    }\n  };\n\n  useEffect(() => {\n    if (gpsFieldNames.length > 0) fetchLocation();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stageConfig.title]);\n\n  useEffect(() => {\n    if (['processing', 'distributor', 'supplier', 'shopkeeper'].includes(stageUser?.stage)) {\n      fetchFarmers();\n    }\n  }, [stageUser?.stage]);\n\n  useEffect(() => {\n    if (['processing', 'distributor', 'supplier', 'shopkeeper'].includes(stageUser?.stage) && selectedFarmer) {\n      fetchBatchesForFarmer(selectedFarmer);\n    } else {\n      setBatches([]);\n      setSelectedBatch('');\n      setBatchPacketCount(null);\n    }\n  }, [selectedFarmer, stageUser?.stage]);\n\n  useEffect(() => {\n    if (stageUser?.stage === 'processing' && selectedBatch) {\n      fetchBatchPacketCount(selectedBatch);\n      setFormData(prev => ({ ...prev, batch_id: selectedBatch }));\n    } else {\n      setBatchPacketCount(null);\n    }\n  }, [selectedBatch, stageUser?.stage]);\n\n  useEffect(() => {\n    if (stageUser?.stage === 'processing' && selectedBatch) {\n      setLoadingBatchInfo(true);\n      const size = packetSizeGm ? Number(packetSizeGm) : null;\n      const promise = size && size > 0 ? API.getBatchInfo(selectedBatch, size) : API.getBatchInfo(selectedBatch);\n      promise\n        .then(res => setBatchInfo(res.data || null))\n        .catch(() => setBatchInfo(null))\n        .finally(() => setLoadingBatchInfo(false));\n    } else {\n      setBatchInfo(null);\n    }\n  }, [selectedBatch, packetSizeGm, stageUser?.stage]);\n\n  const previousStage = useMemo(() => {\n    if (stageUser?.stage === 'distributor') return 'processing';\n    if (stageUser?.stage === 'supplier') return 'distributor';\n    if (stageUser?.stage === 'shopkeeper') return 'supplier';\n    return null;\n  }, [stageUser?.stage]);\n\n  useEffect(() => {\n    if (previousStage && selectedBatch) {\n      setLoadingPacketsByStage(true);\n      API.getPacketsByStage(selectedBatch, previousStage)\n        .then(res => setPacketsAtStage({ count: res.data.count || 0, packetIds: res.data.packetIds || [] }))\n        .catch(() => setPacketsAtStage({ count: 0, packetIds: [] }))\n        .finally(() => setLoadingPacketsByStage(false));\n    } else {\n      setPacketsAtStage({ count: 0, packetIds: [] });\n    }\n  }, [previousStage, selectedBatch]);\n\n  // Auto-fill actor GPS into receiveFormData\n  useEffect(() => {\n    if (['distributor', 'supplier', 'shopkeeper'].includes(stageUser?.stage)) {\n      fetchLocation('receive');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stageUser?.stage]);\n\n  // Auto-fill actor ID into receiveFormData\n  useEffect(() => {\n    if (actorIdFieldName && actorId) {\n      setReceiveFormData(prev => ({ ...prev, [actorIdFieldName]: prev[actorIdFieldName] ?? actorId }));\n    }\n  }, [actorIdFieldName, actorId]);\n\n  const fetchFarmers = async () => {\n    setLoadingFarmers(true);\n    try {\n      const response = await API.getFarmers();\n      setFarmers(response.data.farmers || []);\n    } catch (err) {\n      setError(`Failed to load farmers: ${err.message}`);\n    } finally {\n      setLoadingFarmers(false);\n    }\n  };\n\n  const fetchBatchesForFarmer = async (farmerId) => {\n    setLoadingBatches(true);\n    try {\n      const response = await API.getBatchesForFarmer(farmerId);\n      setBatches(response.data.batches || []);\n      setSelectedBatch('');\n    } catch (err) {\n      setError(`Failed to load batches: ${err.message}`);\n      setBatches([]);\n    } finally {\n      setLoadingBatches(false);\n    }\n  };\n\n  const fetchBatchPacketCount = async (batchId) => {\n    try {\n      const response = await API.getBatchPacketCount(batchId);\n      setBatchPacketCount({ count: parseInt(response.data.packetCount) || 0, exists: response.data.exists });\n    } catch {\n      setBatchPacketCount({ count: 0, exists: false });\n    }\n  };\n\n  const handleCreatePacketsSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    const count = parseInt(createPacketCount, 10);\n    const maxPackets = batchInfo?.maxPackets ?? 0;\n    if (!selectedBatch || !packetSizeGm || count < 1 || count > maxPackets) {\n      setError(`Enter number of packets between 1 and ${maxPackets}.`);\n      setLoading(false);\n      return;\n    }\n    try {\n      const payload = {\n        packet_size_gm: Number(packetSizeGm),\n        count,\n        processing_gps: formData.processing_gps || '',\n        grinding_facility_name: formData.grinding_facility_name || '',\n        moisture_content: formData.moisture_content || 0,\n        curcumin_content: formData.curcumin_content || 0,\n        heavy_metals: formData.heavy_metals || '',\n        physical_properties: formData.physical_properties || '',\n        packaging_date: formData.packaging_date || '',\n        packaging_unit: `${packetSizeGm}g`,\n        expiry_date: formData.expiry_date || '',\n        sending_box_code: formData.sending_box_code || '',\n        distributor_id: formData.distributor_id || '',\n      };\n      const res = await API.createPackets(selectedBatch, payload);\n      const createdIds = res.data.packetIds || [];\n      setSuccess(`${res.data.message || `Created ${count} packet(s).`} IDs: ${createdIds.join(', ')}`);\n      setCreatePacketCount('');\n      setPacketSizeGm('');\n      fetchBatchPacketCount(selectedBatch);\n      const infoRes = await API.getBatchInfo(selectedBatch, Number(packetSizeGm));\n      setBatchInfo(infoRes.data);\n    } catch (err) {\n      setError(err?.response?.data?.error || err?.message || 'Failed to create packets.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleReceiveSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    const count = parseInt(receiveCount, 10);\n    if (!selectedBatch || !selectedFarmer || count < 1 || count > (packetsAtStage.count || 0)) {\n      setError(`Enter number of packets between 1 and ${packetsAtStage.count || 0}.`);\n      setLoading(false);\n      return;\n    }\n    try {\n      const stage = stageUser?.stage;\n      const base = { batch_id: selectedBatch, farmer_id: selectedFarmer, count, ...receiveFormData };\n      if (actorIdFieldName && actorId) base[actorIdFieldName] = base[actorIdFieldName] ?? actorId;\n      let res;\n      if (stage === 'distributor') res = await API.distributorReceive(base);\n      else if (stage === 'supplier') res = await API.supplierReceive(base);\n      else if (stage === 'shopkeeper') res = await API.shopkeeperReceive(base);\n      else throw new Error('Invalid stage');\n      setSuccess(res.data.message || `Received ${count} packet(s).`);\n      setReceiveCount('');\n      setPacketsAtStage(p => ({ count: (p.count || 0) - count, packetIds: [] }));\n    } catch (err) {\n      setError(err?.response?.data?.error || err?.message || 'Failed to receive packets.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    if (name === actorIdFieldName) return;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    try {\n      const submitData = { ...formData };\n      const data = await API[stageConfig.submitEndpoint](submitData);\n      setSuccess('Data submitted successfully!');\n      const resetData = {};\n      if (actorIdFieldName && actorId) resetData[actorIdFieldName] = actorId;\n      setFormData(resetData);\n      setPacketValidation({ status: null, message: '' });\n      if (stageUser?.stage === 'processing') {\n        setSelectedFarmer('');\n        setSelectedBatch('');\n        setBatchPacketCount(null);\n      }\n    } catch (error) {\n      setError(error?.message || error?.response?.data?.message || 'Failed to submit data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStageColor = (stage) => {\n    const colors = { farmer: 'green', processing: 'blue', distributor: 'purple', supplier: 'yellow', shopkeeper: 'red' };\n    return colors[stage] || 'gray';\n  };\n  const stageColor = getStageColor(stageUser?.stage);\n\n  // ── Shared input component ────────────────────────────────────────────────\n  const FormField = ({ label, required, children }) => (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        {label}{required && <span className=\"text-red-500 ml-1\">*</span>}\n      </label>\n      {children}\n    </div>\n  );\n\n  const inputClass = \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\";\n  const selectClass = inputClass;\n\n  const GpsInput = ({ value, onChange, onFetch, fetching }) => (\n    <div className=\"flex gap-2 items-center\">\n      <input value={value || ''} onChange={onChange} placeholder=\"lat, lng\" className={inputClass} readOnly />\n      <button type=\"button\" onClick={onFetch} disabled={fetching}\n        className=\"shrink-0 inline-flex items-center gap-1 px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50\">\n        {fetching ? <RefreshCw className=\"animate-spin\" size={16} /> : <MapPin size={16} />}\n        <span className=\"hidden md:inline\">{fetching ? 'Locating...' : 'GPS'}</span>\n      </button>\n    </div>\n  );\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-6\">\n      <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n\n        {/* Header */}\n        <div className=\"mb-8\">\n          {onBack && (\n            <button onClick={onBack} className=\"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4\">\n              <ArrowLeft size={20} /> Back to Dashboard\n            </button>\n          )}\n          <div className={`bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 p-4 rounded-xl`}>\n            <h1 className=\"text-3xl font-bold text-white mb-1\">{stageConfig.title}</h1>\n            <p className=\"text-white/90\">{stageConfig.description}</p>\n          </div>\n        </div>\n\n        {/* Alerts */}\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2\">\n            <AlertCircle size={20} />{error}\n          </div>\n        )}\n        {success && (\n          <div className=\"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6 flex items-center gap-2\">\n            <CheckCircle size={20} />{success}\n          </div>\n        )}\n\n        {/* ── FARMER STAGE ──────────────────────────────────────────────────── */}\n        {stageUser?.stage === 'farmer' && (\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {stageConfig.fields.map(field => (\n                <div key={field.name} className={field.name.includes('gps') ? 'md:col-span-2' : ''}>\n                  <FormField label={field.label} required={field.required}>\n                    {field.type === 'select' ? (\n                      <select name={field.name} value={formData[field.name] || ''} onChange={handleInputChange} className={selectClass} required={field.required}>\n                        <option value=\"\">Select {field.label}</option>\n                        {field.options.map(o => <option key={o} value={o}>{o}</option>)}\n                      </select>\n                    ) : field.name.includes('gps') ? (\n                      <GpsInput value={formData[field.name]} onChange={handleInputChange} onFetch={() => fetchLocation('form')} fetching={geoStatus.fetching} />\n                    ) : (\n                      <input type={field.type} name={field.name} value={formData[field.name] || ''}\n                        onChange={handleInputChange} placeholder={field.placeholder || `Enter ${field.label.toLowerCase()}`}\n                        className={`${inputClass} ${field.name === actorIdFieldName ? 'bg-gray-50' : ''}`}\n                        required={field.required} readOnly={field.name === actorIdFieldName} />\n                    )}\n                  </FormField>\n                </div>\n              ))}\n            </div>\n            <div className=\"flex justify-end pt-4\">\n              <button type=\"submit\" disabled={loading}\n                className={`bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-2`}>\n                {loading ? <><div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\" />Submitting...</> : <><Save size={20} />Submit Data</>}\n              </button>\n            </div>\n          </form>\n        )}\n\n        {/* ── PROCESSING STAGE ──────────────────────────────────────────────── */}\n        {stageUser?.stage === 'processing' && (\n          <form onSubmit={handleCreatePacketsSubmit} className=\"space-y-6\">\n            <div className=\"p-5 border-2 border-blue-200 rounded-xl bg-blue-50/40\">\n              <h2 className=\"text-lg font-bold text-gray-800 mb-4\">Batch Selection</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField label=\"Select Farmer\" required>\n                  <select value={selectedFarmer} onChange={e => setSelectedFarmer(e.target.value)} className={selectClass} required disabled={loadingFarmers}>\n                    <option value=\"\">{loadingFarmers ? 'Loading...' : 'Select Farmer'}</option>\n                    {farmers.map(f => { const id = typeof f === 'string' ? f : String(f || ''); return <option key={id} value={id}>{id}</option>; })}\n                  </select>\n                </FormField>\n                <FormField label=\"Select Batch ID\" required>\n                  <select value={selectedBatch} onChange={e => setSelectedBatch(e.target.value)} className={selectClass} required disabled={!selectedFarmer || loadingBatches}>\n                    <option value=\"\">{!selectedFarmer ? 'Select farmer first' : loadingBatches ? 'Loading...' : batches.length === 0 ? 'No batches' : 'Select Batch'}</option>\n                    {batches.map(b => <option key={b.batchId} value={b.batchId}>{b.batchId} {b.availableGm != null ? `(${b.availableGm}gm avail)` : ''}</option>)}\n                  </select>\n                </FormField>\n              </div>\n              {selectedBatch && (\n                <div className=\"mt-3 p-3 bg-white rounded-lg border border-blue-200 text-sm text-gray-700\">\n                  Available quantity (after 8% processing loss):{' '}\n                  <strong>{loadingBatchInfo ? 'Loading...' : batchInfo?.availableGm != null ? `${batchInfo.availableGm} gm` : '—'}</strong>\n                </div>\n              )}\n            </div>\n\n            {selectedBatch && (\n              <>\n                {/* Lab / Quality Testing */}\n                <div className=\"p-5 border border-gray-200 rounded-xl\">\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-4\">Lab & Quality Testing</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField label=\"Processing GPS\" required>\n                      <GpsInput value={formData.processing_gps} onChange={e => setFormData(p => ({ ...p, processing_gps: e.target.value }))} onFetch={() => fetchLocation('form')} fetching={geoStatus.fetching} />\n                    </FormField>\n                    <FormField label=\"Grinding Facility Name\" required>\n                      <input type=\"text\" value={formData.grinding_facility_name || ''} onChange={e => setFormData(p => ({ ...p, grinding_facility_name: e.target.value }))} className={inputClass} required placeholder=\"e.g. Sri Ram Grinding Unit\" />\n                    </FormField>\n                    <FormField label=\"Moisture Content (%)\" required>\n                      <input type=\"number\" step=\"0.01\" value={formData.moisture_content || ''} onChange={e => setFormData(p => ({ ...p, moisture_content: e.target.value }))} className={inputClass} required placeholder=\"e.g. 8.5\" />\n                    </FormField>\n                    <FormField label=\"Curcumin Content (%)\" required>\n                      <input type=\"number\" step=\"0.01\" value={formData.curcumin_content || ''} onChange={e => setFormData(p => ({ ...p, curcumin_content: e.target.value }))} className={inputClass} required placeholder=\"e.g. 3.2\" />\n                    </FormField>\n                    <FormField label=\"Heavy Metals Check\" required>\n                      <select value={formData.heavy_metals || ''} onChange={e => setFormData(p => ({ ...p, heavy_metals: e.target.value }))} className={selectClass} required>\n                        <option value=\"\">Select result</option>\n                        <option value=\"Pass\">Pass</option>\n                        <option value=\"Fail\">Fail</option>\n                      </select>\n                    </FormField>\n                    <FormField label=\"Physical Properties\" required>\n                      <input type=\"text\" value={formData.physical_properties || ''} onChange={e => setFormData(p => ({ ...p, physical_properties: e.target.value }))} className={inputClass} required placeholder=\"e.g. Fine yellow powder\" />\n                    </FormField>\n                  </div>\n                </div>\n\n                {/* Packaging Info */}\n                <div className=\"p-5 border border-gray-200 rounded-xl\">\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-4\">Packaging Information</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField label=\"Packaging Date\" required>\n                      <input type=\"date\" value={formData.packaging_date || ''} onChange={e => setFormData(p => ({ ...p, packaging_date: e.target.value }))} className={inputClass} required />\n                    </FormField>\n                    <FormField label=\"Expiry Date\" required>\n                      <input type=\"date\" value={formData.expiry_date || ''} onChange={e => setFormData(p => ({ ...p, expiry_date: e.target.value }))} className={inputClass} required />\n                    </FormField>\n                    <FormField label=\"Sending Box Code\" required>\n                      <input type=\"text\" value={formData.sending_box_code || ''} onChange={e => setFormData(p => ({ ...p, sending_box_code: e.target.value }))} className={inputClass} required placeholder=\"e.g. BOX-001\" />\n                    </FormField>\n                    <FormField label=\"Distributor ID\" required>\n                      <input type=\"text\" value={formData.distributor_id || ''} onChange={e => setFormData(p => ({ ...p, distributor_id: e.target.value }))} className={inputClass} required placeholder=\"e.g. dist1\" />\n                    </FormField>\n                  </div>\n                </div>\n\n                {/* Packet Creation */}\n                <div className=\"p-5 border-2 border-blue-300 rounded-xl bg-blue-50/40\">\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-4\">Create Packets</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\n                    <FormField label=\"Packet size (gm)\" required>\n                      <select value={packetSizeGm} onChange={e => setPacketSizeGm(e.target.value)} className={selectClass} required>\n                        <option value=\"\">Select size</option>\n                        {[50, 100, 250, 500].map(g => <option key={g} value={g}>{g} gm</option>)}\n                      </select>\n                    </FormField>\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-700 mb-1\">Max packets (for this size)</p>\n                      <p className=\"py-2 text-gray-800 font-semibold\">{loadingBatchInfo ? '...' : batchInfo?.maxPackets != null ? batchInfo.maxPackets : '—'}</p>\n                    </div>\n                    <FormField label=\"Number of packets to create\" required>\n                      <input type=\"number\" min={1} max={batchInfo?.maxPackets ?? 0} value={createPacketCount}\n                        onChange={e => setCreatePacketCount(e.target.value)} className={inputClass} required placeholder=\"e.g. 5\" />\n                    </FormField>\n                  </div>\n                  <p className=\"mt-2 text-xs text-gray-500\">Packet IDs format: FarmerId-BatchId-{packetSizeGm || '50'}g-001, 002, ...</p>\n                </div>\n\n                <div className=\"flex justify-end\">\n                  <button type=\"submit\" disabled={loading || loadingBatchInfo || (batchInfo?.maxPackets ?? 0) < 1}\n                    className=\"bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\">\n                    {loading ? <><div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\" />Creating...</> : <><Save size={20} />Create Packets</>}\n                  </button>\n                </div>\n              </>\n            )}\n          </form>\n        )}\n\n        {/* ── DISTRIBUTOR / SUPPLIER / SHOPKEEPER STAGE ─────────────────────── */}\n        {['distributor', 'supplier', 'shopkeeper'].includes(stageUser?.stage) && (\n          <form onSubmit={handleReceiveSubmit} className=\"space-y-6\">\n\n            {/* Batch Selection */}\n            <div className=\"p-5 border-2 border-purple-200 rounded-xl bg-purple-50/40\">\n              <h2 className=\"text-lg font-bold text-gray-800 mb-4\">Select Batch</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField label=\"Select Farmer\" required>\n                  <select value={selectedFarmer} onChange={e => setSelectedFarmer(e.target.value)} className={selectClass} required disabled={loadingFarmers}>\n                    <option value=\"\">{loadingFarmers ? 'Loading...' : 'Select Farmer'}</option>\n                    {farmers.map(f => { const id = typeof f === 'string' ? f : String(f || ''); return <option key={id} value={id}>{id}</option>; })}\n                  </select>\n                </FormField>\n                <FormField label=\"Select Batch ID\" required>\n                  <select value={selectedBatch} onChange={e => setSelectedBatch(e.target.value)} className={selectClass} required disabled={!selectedFarmer || loadingBatches}>\n                    <option value=\"\">{!selectedFarmer ? 'Select farmer first' : loadingBatches ? 'Loading...' : batches.length === 0 ? 'No batches' : 'Select Batch'}</option>\n                    {batches.map(b => <option key={b.batchId} value={b.batchId}>{b.batchId}</option>)}\n                  </select>\n                </FormField>\n              </div>\n              {selectedBatch && (\n                <div className=\"mt-3 p-3 bg-white rounded-lg border border-purple-200 text-sm text-gray-700\">\n                  Packets available at <strong>{previousStage}</strong>:{' '}\n                  <strong>{loadingPacketsByStage ? 'Loading...' : packetsAtStage.count ?? 0}</strong>\n                </div>\n              )}\n            </div>\n\n            {selectedBatch && (\n              <>\n                {/* Stage-specific fields */}\n                <div className=\"p-5 border border-gray-200 rounded-xl\">\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-4\">\n                    {stageUser?.stage === 'distributor' && 'Distribution Details'}\n                    {stageUser?.stage === 'supplier' && 'Supply Details'}\n                    {stageUser?.stage === 'shopkeeper' && 'Receipt Details'}\n                  </h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\n                    {stageUser?.stage === 'distributor' && (<>\n                      <FormField label=\"Distributor ID\" required>\n                        <input value={receiveFormData.distributor_id ?? actorId} onChange={e => setReceiveFormData(p => ({ ...p, distributor_id: e.target.value }))} className={`${inputClass} bg-gray-50`} required readOnly />\n                      </FormField>\n                      <FormField label=\"GPS Coordinates\" required>\n                        <GpsInput value={receiveFormData.gps_coordinates} onChange={e => setReceiveFormData(p => ({ ...p, gps_coordinates: e.target.value }))} onFetch={() => fetchLocation('receive')} fetching={geoStatus.fetching} />\n                      </FormField>\n                      <FormField label=\"Received Box Code\" required>\n                        <input value={receiveFormData.received_box_code ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, received_box_code: e.target.value }))} className={inputClass} required placeholder=\"e.g. BOX-001\" />\n                      </FormField>\n                      <FormField label=\"Dispatch Date\" required>\n                        <input type=\"date\" value={receiveFormData.dispatch_date ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, dispatch_date: e.target.value }))} className={inputClass} required />\n                      </FormField>\n                      <FormField label=\"Sending Box Code\" required>\n                        <input value={receiveFormData.sending_box_code ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, sending_box_code: e.target.value }))} className={inputClass} required placeholder=\"e.g. BOX-002\" />\n                      </FormField>\n                      <FormField label=\"Supplier ID\" required>\n                        <input value={receiveFormData.supplier_id ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, supplier_id: e.target.value }))} className={inputClass} required placeholder=\"e.g. supplier1\" />\n                      </FormField>\n                    </>)}\n\n                    {stageUser?.stage === 'supplier' && (<>\n                      <FormField label=\"Supplier ID\" required>\n                        <input value={receiveFormData.supplier_id ?? actorId} onChange={e => setReceiveFormData(p => ({ ...p, supplier_id: e.target.value }))} className={`${inputClass} bg-gray-50`} required readOnly />\n                      </FormField>\n                      <FormField label=\"Received Box Code\" required>\n                        <input value={receiveFormData.received_box_code ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, received_box_code: e.target.value }))} className={inputClass} required placeholder=\"e.g. BOX-001\" />\n                      </FormField>\n                      <FormField label=\"GPS Coordinates\" required>\n                        <GpsInput value={receiveFormData.gps_coordinates} onChange={e => setReceiveFormData(p => ({ ...p, gps_coordinates: e.target.value }))} onFetch={() => fetchLocation('receive')} fetching={geoStatus.fetching} />\n                      </FormField>\n                      <FormField label=\"Receipt Date\" required>\n                        <input type=\"date\" value={receiveFormData.receipt_date ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, receipt_date: e.target.value }))} className={inputClass} required />\n                      </FormField>\n                      <FormField label=\"Shopkeeper ID\" required>\n                        <input value={receiveFormData.shopkeeper_id ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, shopkeeper_id: e.target.value }))} className={inputClass} required placeholder=\"e.g. shop1\" />\n                      </FormField>\n                    </>)}\n\n                    {stageUser?.stage === 'shopkeeper' && (<>\n                      <FormField label=\"Shopkeeper ID\" required>\n                        <input value={receiveFormData.shopkeeper_id ?? actorId} onChange={e => setReceiveFormData(p => ({ ...p, shopkeeper_id: e.target.value }))} className={`${inputClass} bg-gray-50`} required readOnly />\n                      </FormField>\n                      <FormField label=\"GPS Coordinates\" required>\n                        <GpsInput value={receiveFormData.gps_coordinates} onChange={e => setReceiveFormData(p => ({ ...p, gps_coordinates: e.target.value }))} onFetch={() => fetchLocation('receive')} fetching={geoStatus.fetching} />\n                      </FormField>\n                      <FormField label=\"Date Received\" required>\n                        <input type=\"date\" value={receiveFormData.date_received ?? ''} onChange={e => setReceiveFormData(p => ({ ...p, date_received: e.target.value }))} className={inputClass} required />\n                      </FormField>\n                    </>)}\n\n                  </div>\n                </div>\n\n                {/* Packet count */}\n                <div className=\"p-5 border-2 border-purple-300 rounded-xl bg-purple-50/40\">\n                  <h2 className=\"text-lg font-bold text-gray-800 mb-3\">Receive Packets</h2>\n                  <FormField label=\"Number of packets to receive\" required>\n                    <input type=\"number\" min={1} max={packetsAtStage.count || 0} value={receiveCount}\n                      onChange={e => setReceiveCount(e.target.value)} className=\"w-full max-w-xs px-4 py-2 border border-gray-300 rounded-lg\" required placeholder=\"e.g. 5\" />\n                  </FormField>\n                </div>\n\n                <div className=\"flex justify-end\">\n                  <button type=\"submit\" disabled={loading || loadingPacketsByStage || (packetsAtStage.count || 0) < 1}\n                    className={`bg-gradient-to-r from-${stageColor}-600 to-${stageColor}-700 text-white px-8 py-3 rounded-lg font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-2`}>\n                    {loading ? <><div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\" />Submitting...</> : <><Save size={20} />Receive Packets</>}\n                  </button>\n                </div>\n              </>\n            )}\n          </form>\n        )}\n\n      </div>\n    </div>\n  );\n};\n\nexport default StageDataEntryForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}