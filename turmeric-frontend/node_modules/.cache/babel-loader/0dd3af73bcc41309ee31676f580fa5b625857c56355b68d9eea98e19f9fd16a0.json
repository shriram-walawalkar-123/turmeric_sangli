{"ast":null,"code":"import axios from 'axios';\n\n// Backend API base URL\n// Note: React dev server typically runs on :3000, so default backend to :3001\nexport const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  timeout: 10000\n});\napiClient.interceptors.request.use(config => {\n  const stageToken = localStorage.getItem('stageToken');\n  if (stageToken) {\n    config.headers = config.headers || {};\n    config.headers['Authorization'] = `Bearer ${stageToken}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Normalize backend error shape for consumers\napiClient.interceptors.response.use(res => res, err => {\n  var _err$response, _err$response$data, _err$response2, _err$response2$data;\n  const backendMsg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message);\n  if (backendMsg) {\n    err.message = backendMsg;\n  }\n  return Promise.reject(err);\n});\n\n// API endpoints\nexport const API = {\n  // Harvest endpoints\n  addHarvest: data => apiClient.post('/api/harvest', data),\n  // Processing endpoints\n  addProcessing: data => apiClient.post('/api/processing', data),\n  // Distributor endpoints\n  addDistributor: data => apiClient.post('/api/distributor', data),\n  // Supplier endpoints\n  addSupplier: data => apiClient.post('/api/supplier', data),\n  // Shopkeeper endpoints\n  addShopkeeper: data => apiClient.post('/api/shopkeeper', data),\n  // Packet endpoints\n  addPacket: data => apiClient.post('/api/packet', data),\n  // Journey tracking\n  getJourney: packetId => apiClient.get(`/api/journey/${packetId}`),\n  // Dashboard stats\n  getStats: () => apiClient.get('/api/stats'),\n  // Recent activity\n  getRecentActivity: () => apiClient.get('/api/activity'),\n  // Farmers and batches\n  getFarmers: () => apiClient.get('/api/farmers'),\n  getBatchesForFarmer: farmerId => apiClient.get(`/api/farmers/${farmerId}/batches`),\n  getBatchPacketCount: batchId => apiClient.get(`/api/batches/${batchId}/packet-count`),\n  checkPacketExists: packetId => apiClient.get(`/api/packets/${packetId}/exists`),\n  validatePacketForStage: (packetId, stage) => apiClient.get(`/api/packets/${packetId}/validate/${stage}`)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","timeout","interceptors","request","use","config","stageToken","localStorage","getItem","error","Promise","reject","response","res","err","_err$response","_err$response$data","_err$response2","_err$response2$data","backendMsg","data","message","API","addHarvest","post","addProcessing","addDistributor","addSupplier","addShopkeeper","addPacket","getJourney","packetId","get","getStats","getRecentActivity","getFarmers","getBatchesForFarmer","farmerId","getBatchPacketCount","batchId","checkPacketExists","validatePacketForStage","stage"],"sources":["C:/Users/swala/Desktop/turmeric_sangli/turmeric-frontend/src/config/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Backend API base URL\r\n// Note: React dev server typically runs on :3000, so default backend to :3001\r\nexport const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\r\n\r\n// Create axios instance with default config\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n  timeout: 10000,\r\n});\r\n\r\napiClient.interceptors.request.use((config) => {\r\n  const stageToken = localStorage.getItem('stageToken');\r\n  if (stageToken) {\r\n    config.headers = config.headers || {};\r\n    config.headers['Authorization'] = `Bearer ${stageToken}`;\r\n  }\r\n  return config;\r\n}, (error) => Promise.reject(error));\r\n\r\n// Normalize backend error shape for consumers\r\napiClient.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    const backendMsg = err?.response?.data?.error || err?.response?.data?.message;\r\n    if (backendMsg) {\r\n      err.message = backendMsg;\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n\r\n// API endpoints\r\nexport const API = {\r\n  // Harvest endpoints\r\n  addHarvest: (data) => apiClient.post('/api/harvest', data),\r\n  \r\n  // Processing endpoints\r\n  addProcessing: (data) => apiClient.post('/api/processing', data),\r\n  \r\n  // Distributor endpoints\r\n  addDistributor: (data) => apiClient.post('/api/distributor', data),\r\n  \r\n  // Supplier endpoints\r\n  addSupplier: (data) => apiClient.post('/api/supplier', data),\r\n  \r\n  // Shopkeeper endpoints\r\n  addShopkeeper: (data) => apiClient.post('/api/shopkeeper', data),\r\n  \r\n  // Packet endpoints\r\n  addPacket: (data) => apiClient.post('/api/packet', data),\r\n  \r\n  // Journey tracking\r\n  getJourney: (packetId) => apiClient.get(`/api/journey/${packetId}`),\r\n  \r\n  // Dashboard stats\r\n  getStats: () => apiClient.get('/api/stats'),\r\n  \r\n  // Recent activity\r\n  getRecentActivity: () => apiClient.get('/api/activity'),\r\n  \r\n  // Farmers and batches\r\n  getFarmers: () => apiClient.get('/api/farmers'),\r\n  getBatchesForFarmer: (farmerId) => apiClient.get(`/api/farmers/${farmerId}/batches`),\r\n  getBatchPacketCount: (batchId) => apiClient.get(`/api/batches/${batchId}/packet-count`),\r\n  checkPacketExists: (packetId) => apiClient.get(`/api/packets/${packetId}/exists`),\r\n  validatePacketForStage: (packetId, stage) => apiClient.get(`/api/packets/${packetId}/validate/${stage}`),\r\n};\r\n\r\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}